"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_unsupportedIterableToArray(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,a){if(t){if("string"==typeof t)return _arrayLikeToArray(t,a);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,a):void 0}}function _arrayLikeToArray(t,a){(null==a||a>t.length)&&(a=t.length);for(var r=0,e=new Array(a);r<a;r++)e[r]=t[r];return e}function _iterableToArrayLimit(t,a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],e=!0,n=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(e=(o=c.next()).done)&&(r.push(o.value),!a||r.length!==a);e=!0);}catch(t){n=!0,i=t}finally{try{e||null==c.return||c.return()}finally{if(n)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}window.onload=function(){var n;$.get("http://127.0.0.1:5000/api/cate").then(function(t){var a="";t.forEach(function(t){a+='<a href="javascript:;" cat_id=\''.concat(t.cat_id,"'>").concat(t.name,"</a>")});var r='<a href="javascript:;" class="underline">\n        全部分类\n    </a>'+a;$("#nav-pills").html(r),$("#nav-pills").on("click","a",function(){$(this).addClass("underline").siblings("a").removeClass("underline")}),$("#nav-pills").on("click","a",function(){o=1,$("#classifiedArticles").html("");var t=$(this).attr("cat_id");if(!t)return n=1,void c();n=2,l(i=t)}),function(){if(Object.keys(s(d)).length){n=2;for(var t=s(d),a=t.cat_id,r=_toConsumableArray($("#nav-pills a")),e=1;e<r.length;e++)$(r[e]).attr("cat_id")==a&&$(r[e]).addClass("underline").siblings("a").removeClass("underline");l(i=a)}else n=1,c()}()});var i,o=1,a=5;function c(){var e=layer.load(1,{shade:[.1,"#fff"]});$.get("http://127.0.0.1:5000/api/article?_page=".concat(o,"&_limit=").concat(a)).then(function(t){if(layer.close(e),t.length){var a="";t.forEach(function(t){!t.cover&&(t.cover="http://placehold.it/700x200/000000.jpg/ffffff?text=placeholder"),a+='<a href="http://127.0.0.1:8000/articleDetails?art_id='.concat(t.art_id,'"> \n                <div class="publish" id="btmArticle">\n                    <div class="row articleLine">\n                        <div class="col-sm-9">\n                            <h3 class="post-title">').concat(t.title,'</h3>\n                            <p class="text-muted"><span>').concat(t.author,"</span>&nbsp;发布于&nbsp;<span>").concat(t.publish_date,'</span></p>\n                            <p class="text-muted">分类 ：<a href="javascript:;">').concat(t.name,'</a></p>\n                        </div>\n                        <div class="col-sm-3 hidden-xs pic">\n                            <img src="').concat(t.cover,'" alt="">\n                        </div>\n                    </div>\n                </div>\n            </a>')});var r=$("#classifiedArticles").html()+a;$("#classifiedArticles").html(r)}else alert("没有更多内容了")})}function l(t){var e=layer.load(1,{shade:[.1,"#fff"]});$.get("http://127.0.0.1:5000/api/getCateArticle/".concat(t,"?_page=").concat(o,"&_limit=").concat(a)).then(function(t){if(console.log(11),layer.close(e),t.length){var a="";t.forEach(function(t){a+='<a href="http://127.0.0.1:8000/articleDetails?art_id='.concat(t.art_id,'">\n                <div class="publish" id="btmArticle">\n                    <div class="row articleLine">\n                        <div class="col-sm-9">\n                            <h3 class="post-title">').concat(t.title,'</h3>\n                            <p class="text-muted"><span>').concat(t.author,"</span>&nbsp;发布于&nbsp;<span>").concat(t.publish_date,'</span></p>\n                            <p class="text-muted">分类 ：<a href="javascript:;">').concat(t.cat_name,'</a></p>\n                        </div>\n                        <div class="col-sm-3 hidden-xs pic">\n                            <img src="').concat(t.cover,'" alt="">\n                        </div>\n                    </div>\n                </div>\n            </a>')});var r=$("#classifiedArticles").html()+a;$("#classifiedArticles").html(r)}else alert("没有更多内容了")})}function s(t){var a=location.search.slice(1)||"",n={};return a&&a.split("&").forEach(function(t){var a=_slicedToArray(t.split("="),2),r=a[0],e=a[1];n[r]=decodeURIComponent(e)}),n}$("#loadMore").on("click",function(){o++,1==n?c():l(i)});var d=location.href};